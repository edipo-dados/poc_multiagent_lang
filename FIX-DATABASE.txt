โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐๏ธ  FIX DATABASE - PostgreSQL timeout                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Agora o erro รฉ diferente! O Ollama estรก OK, mas o PostgreSQL estรก
com timeout. Vamos verificar e corrigir.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ DIAGNรSTICO DO BANCO DE DADOS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# 1. Verificar se PostgreSQL estรก rodando
docker compose ps

# 2. Ver logs do PostgreSQL
docker compose logs postgres --tail 30

# 3. Verificar se o backend consegue resolver o nome 'postgres'
docker compose exec backend ping -c 2 postgres || echo "Ping falhou"

# 4. Verificar .env
cat .env

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ SOLUรรO: Reiniciar PostgreSQL e Backend
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Reiniciar PostgreSQL
docker compose restart postgres

# Aguardar PostgreSQL ficar pronto
echo "Aguardando PostgreSQL..."
sleep 10

# Verificar se estรก saudรกvel
docker compose ps postgres

# Reiniciar backend
docker compose restart backend

# Aguardar backend
echo "Aguardando backend..."
sleep 10

# Testar health
curl http://localhost:8000/health | jq '.'

# Testar API
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐งช Teste da API:"
curl -X POST http://localhost:8000/analyze \
  -H 'Content-Type: application/json' \
  -d '{"regulatory_text":"RESOLUรรO BCB Nยบ 789/2024","repo_path":"/app/fake_pix_repo"}' \
  | head -50

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

COPIE TODO O BLOCO ACIMA E COLE NO TERMINAL

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ SE POSTGRESQL NรO ESTIVER RODANDO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Iniciar todos os serviรงos
docker compose up -d

# Aguardar
sleep 15

# Verificar status
docker compose ps

# Ver logs
docker compose logs --tail 50

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ RESULTADO ESPERADO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. docker compose ps deve mostrar:
   - postgres: Up (healthy)
   - backend: Up
   - frontend: Up

2. Health check deve mostrar:
   {
     "status": "healthy",
     "database": "connected",
     "vector_store": "available"
   }

3. API deve retornar JSON com execution_id (nรฃo timeout)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ RESUMO DOS PROBLEMAS RESOLVIDOS
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ Ollama configurado em 0.0.0.0:11434
โ Firewall liberado para porta 11434
โ .env com OLLAMA_BASE_URL correto
โณ PostgreSQL precisa estar rodando e saudรกvel

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
