⚡ SOLUÇÃO RÁPIDA - COPIAR SCRIPT PARA CONTAINER
=================================================

# 1. Copiar script inline para o container
docker cp populate-inline.py poc_multiagent_lang-backend-1:/tmp/populate.py

# 2. Rodar o script
docker compose exec backend python /tmp/populate.py

# 3. Verificar
docker compose exec postgres psql -U postgres -d regulatory_ai -c "SELECT COUNT(*) FROM code_embeddings;"

==========================================

OU MAIS SIMPLES AINDA - RODE DIRETO:

docker compose exec backend python -c "
import asyncio
import asyncpg
from pathlib import Path
from sentence_transformers import SentenceTransformer

async def main():
    print('Carregando modelo...')
    model = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')
    
    print('Conectando...')
    conn = await asyncpg.connect(
        host='postgres', port=5432, database='regulatory_ai',
        user='postgres', password='postgres'
    )
    
    repo = Path('/app/fake_pix_repo')
    files = ['api/endpoints.py', 'api/schemas.py', 'domain/models.py', 
             'domain/validators.py', 'database/models.py']
    
    for f in files:
        path = repo / f
        if not path.exists():
            continue
        print(f'Processando {f}...')
        content = path.read_text()
        emb = model.encode(content).tolist()
        await conn.execute(
            'INSERT INTO code_embeddings (file_path, content, embedding) '
            'VALUES (\$1, \$2, \$3::vector) '
            'ON CONFLICT (file_path) DO UPDATE SET '
            'content = EXCLUDED.content, embedding = EXCLUDED.embedding',
            f, content, emb
        )
    
    count = await conn.fetchval('SELECT COUNT(*) FROM code_embeddings')
    print(f'Total: {count}')
    await conn.close()

asyncio.run(main())
"

==========================================

ESCOLHA A OPÇÃO MAIS FÁCIL!
