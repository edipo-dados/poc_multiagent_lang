โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐งน GUIA DE LIMPEZA DO SERVIDOR EC2
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ARQUIVO CRIADO: cleanup-server.sh

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ COMO USAR
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# 1. Dar permissรฃo de execuรงรฃo
chmod +x cleanup-server.sh

# 2. Executar o script
./cleanup-server.sh

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐๏ธ  O QUE O SCRIPT LIMPA
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

DOCKER:
โ Containers parados (docker ps -a | grep Exited)
โ Imagens dangling (sem tag, <none>)
โ Imagens nรฃo utilizadas (nรฃo referenciadas)
โ Volumes รณrfรฃos (nรฃo conectados a containers)
โ Redes nรฃo utilizadas
โ Cache de build (layers intermediรกrios)

SISTEMA:
โ Logs do journald (mantรฉm รบltimos 7 dias)
โ Arquivos em /tmp (mais de 7 dias)
โ Cache do apt (Ubuntu/Debian)
โ Cache do pip (Python)
โ Arquivos .log grandes (>100MB)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐พ ESPAรO TรPICO LIBERADO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

- Imagens Docker antigas: 1-5 GB
- Cache de build: 500 MB - 2 GB
- Logs do sistema: 100-500 MB
- Volumes รณrfรฃos: 100 MB - 1 GB
- Cache apt/pip: 50-200 MB

TOTAL ESPERADO: 2-8 GB liberados

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ๏ธ  AVISOS IMPORTANTES
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. โ SEGURO: O script NรO remove:
   - Containers em execuรงรฃo
   - Imagens usadas por containers ativos
   - Volumes em uso
   - Arquivos do projeto

2. โ๏ธ  CUIDADO: O script REMOVE:
   - Imagens Docker antigas (pode precisar rebuild)
   - Containers parados (histรณrico perdido)
   - Logs antigos (>7 dias)

3. ๐ก RECOMENDAรรO:
   - Execute antes de fazer deploy de nova versรฃo
   - Execute semanalmente em produรงรฃo
   - Verifique espaรงo antes: df -h

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ COMANDOS รTEIS PARA DIAGNรSTICO
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Ver espaรงo em disco
df -h

# Ver uso de espaรงo por diretรณrio
du -sh /* 2>/dev/null | sort -h

# Ver tamanho do Docker
docker system df

# Ver imagens Docker
docker images

# Ver containers (todos)
docker ps -a

# Ver volumes Docker
docker volume ls

# Ver espaรงo usado por logs
sudo journalctl --disk-usage

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ง LIMPEZA MANUAL ADICIONAL (SE NECESSรRIO)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

# Remover TUDO do Docker (CUIDADO!)
docker system prune -a --volumes -f

# Limpar logs do journald completamente
sudo journalctl --vacuum-size=100M

# Remover pacotes nรฃo utilizados (Ubuntu)
sudo apt-get autoremove -y

# Limpar cache do npm (se usar Node.js)
npm cache clean --force

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ AGENDAMENTO AUTOMรTICO (OPCIONAL)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Para executar automaticamente toda semana:

# Editar crontab
crontab -e

# Adicionar linha (executa todo domingo รs 3h da manhรฃ)
0 3 * * 0 /home/ubuntu/poc_multiagent_lang/cleanup-server.sh >> /home/ubuntu/cleanup.log 2>&1

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ EXEMPLO DE SAรDA ESPERADA
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ANTES DA LIMPEZA:
๐พ Espaรงo em disco:
/dev/xvda1       20G   18G  2.0G  90% /

๐๏ธ  [1/8] Removendo containers parados...
   โ Containers parados removidos

๐๏ธ  [2/8] Removendo imagens dangling...
   โ Imagens dangling removidas

... (continua)

๐ DEPOIS DA LIMPEZA:
๐พ Espaรงo em disco:
/dev/xvda1       20G   14G  6.0G  70% /

โ Liberados: ~4GB
