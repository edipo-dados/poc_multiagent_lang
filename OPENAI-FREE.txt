â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ðŸ†“ USAR OPENAI GRÃTIS - Modelo de Teste                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VocÃª tem acesso ao tier gratuito da OpenAI para testes!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸš€ COMANDOS PARA EXECUTAR NO EC2
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# 1. Fazer pull das mudanÃ§as
cd ~/poc_multiagent_lang
git pull origin main

# 2. Atualizar .env com sua API key
cat > .env << 'EOF'
DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/regulatory_ai
LLM_TYPE=openai
OPENAI_API_KEY=SUA_CHAVE_AQUI
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_BASE_URL=https://api.openai.com/v1
EOF

# IMPORTANTE: Substitua "SUA_CHAVE_AQUI" pela sua chave real!
# Exemplo: OPENAI_API_KEY=sk-proj-abc123...

# 3. Verificar .env
cat .env

# 4. Reiniciar backend
docker compose restart backend

# 5. Aguardar
echo "Aguardando 10 segundos..."
sleep 10

# 6. Testar
curl -X POST http://localhost:8000/analyze \
  -H 'Content-Type: application/json' \
  -d '{"regulatory_text":"RESOLUÃ‡ÃƒO BCB NÂº 789/2024 - Teste de regulaÃ§Ã£o bancÃ¡ria sobre limites de crÃ©dito e requisitos de capital para instituiÃ§Ãµes financeiras","repo_path":"/app/fake_pix_repo"}' \
  | jq '.'

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

COPIE TODO O BLOCO ACIMA (lembre de substituir SUA_CHAVE_AQUI)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… RESULTADO ESPERADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Resposta RÃPIDA (2-5 segundos, nÃ£o 60+ segundos!)
2. JSON completo com:
   - execution_id
   - change_detected: true
   - risk_level: high
   - regulatory_model (com dados estruturados!)
   - technical_spec
   - kiro_prompt

3. Logs devem mostrar:
   âœ… Initialized OpenAILLM with model=gpt-3.5-turbo
   âœ… Sentinel Agent completed successfully
   âœ… Translator Agent completed successfully (SEM timeout!)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ” VERIFICAR LOGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

docker compose logs backend --tail 50 | grep -E "(OpenAI|Translator|Sentinel|ERROR)"

Deve mostrar:
- "Initialized OpenAILLM with model=gpt-3.5-turbo"
- "Translator Agent completed successfully"
- NÃƒO deve ter "timeout" ou "fallback"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ“Š COMPARAÃ‡ÃƒO: Antes vs Depois
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES (Ollama):
âŒ Sentinel: OK
âŒ Translator: TIMEOUT (60s) â†’ fallback
âŒ Tempo total: 60+ segundos
âŒ Dados estruturados: MÃ­nimos (fallback)

DEPOIS (OpenAI):
âœ… Sentinel: OK
âœ… Translator: OK (2-3s)
âœ… Tempo total: 5-10 segundos
âœ… Dados estruturados: Completos e precisos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ†“ TIER GRATUITO DA OPENAI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Novos usuÃ¡rios recebem:
- $5 em crÃ©ditos gratuitos
- VÃ¡lido por 3 meses
- Suficiente para ~1000-5000 anÃ¡lises

Modelos disponÃ­veis no tier gratuito:
- gpt-3.5-turbo (recomendado) - RÃ¡pido e barato
- gpt-4o-mini - Mais recente, tambÃ©m barato
- gpt-4 - Melhor qualidade, mais caro

Para usar gpt-4o-mini (mais novo):
OPENAI_MODEL=gpt-4o-mini

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ’° MONITORAR USO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Acesse: https://platform.openai.com/usage
2. Veja quanto jÃ¡ usou dos $5 gratuitos
3. Configure alertas de limite de gasto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ› SE DER ERRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Erro: "OPENAI_API_KEY environment variable is required"
â†’ Verifique se colocou a chave no .env
â†’ Verifique se nÃ£o tem espaÃ§os extras
â†’ Reinicie: docker compose restart backend

Erro: "Invalid API key"
â†’ Verifique se copiou a chave completa (comeÃ§a com sk-proj-)
â†’ Gere uma nova chave em: https://platform.openai.com/api-keys

Erro: "Rate limit exceeded"
â†’ Aguarde 1 minuto e tente novamente
â†’ Tier gratuito tem limite de requisiÃ§Ãµes por minuto

Erro: "Insufficient quota"
â†’ VocÃª usou todos os $5 gratuitos
â†’ Adicione mÃ©todo de pagamento ou volte para Ollama

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ”„ VOLTAR PARA OLLAMA (se quiser)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

cat > .env << 'EOF'
DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/regulatory_ai
LLM_TYPE=ollama
OLLAMA_BASE_URL=http://172.31.5.241:11434
OLLAMA_MODEL=llama2
EOF

docker compose restart backend

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸŽ¯ RECOMENDAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para DEMO/APRESENTAÃ‡ÃƒO: Use OpenAI (rÃ¡pido, impressiona!)
Para DESENVOLVIMENTO: Use Ollama (grÃ¡tis, sem limite)
Para PRODUÃ‡ÃƒO: Depende do volume e orÃ§amento

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
